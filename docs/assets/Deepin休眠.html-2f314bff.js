import{_ as i,r as o,o as c,c as l,a as e,b as s,d,e as n}from"./app-55a6058c.js";const r="/blog/assets/deepin-hibernate-msg-box-d918a1ef.png",t="/blog/assets/deepin-hibernate-select-swap-file-2e9aed1c.png",p="/blog/assets/deepin-hibernate-is-encrypt-data-e9ca8466.png",u={},h=e("h1",{id:"deepin-å¦‚ä½•ä¼‘çœ ",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#deepin-å¦‚ä½•ä¼‘çœ ","aria-hidden":"true"},"#"),s(),e("code",null,"Deepin"),s(" å¦‚ä½•ä¼‘çœ ")],-1),b={href:"https://www.deepin.org",target:"_blank",rel:"noopener noreferrer"},v=e("code",null,"Linux",-1),m=e("code",null,"swap",-1),w=n('<h2 id="æƒ…å†µä¸€" tabindex="-1"><a class="header-anchor" href="#æƒ…å†µä¸€" aria-hidden="true">#</a> æƒ…å†µä¸€</h2><p>å¦‚æœä½ çš„ç”µè„‘æœ‰ <code>swap</code> åˆ†åŒºï¼Œ <code>deepin</code> ä¼šæ¢æµ‹åˆ°ï¼Œå…³æœºçš„æ—¶å€™ä¼šæœ‰ä¼‘çœ é€‰é¡¹äº†ï¼Œè¿™ä¸ªåŠŸèƒ½ç»ˆäºåŠ åˆ°å…³æœºèœå•é‡Œäº†ï¼Œç»™ <code>deepin</code> ç‚¹èµã€‚</p><p><s>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå¯ä»¥æ­£å¸¸ä½¿ç”¨çš„swapåˆ†åŒºï¼Œåªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œ</s><s><code>systemctl hibernate</code></s><s>å°±å¯ä»¥ä¼‘çœ äº†ã€‚</s></p><p><strong>å½“ç„¶ï¼Œä¹Ÿæœ‰ä¾‹å¤–</strong>, å¦‚æœä½ ä¼‘çœ ä¹‹åå¼€æœºå‘ç°ä½ çš„ç”µè„‘å¹¶æ²¡æœ‰æ¢å¤ç°åœºï¼Œåˆ™éœ€è¦æŒ‡å®šä¸€ä¸‹å¯åŠ¨çš„ç£ç›˜ï¼ˆä»swapåˆ†åŒºå¯åŠ¨ï¼‰ï¼Œæ“ä½œæ–¹æ³•å¦‚ä¸‹ï¼š</p><blockquote><p>ä¿®æ”¹/etc/default/grubè¿™ä¸ªæ–‡ä»¶ä¸­çš„ç›¸å…³å†…å®¹ <code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;resume=/dev/sda3 quiet&quot;</code> å…¶ä¸­ <code>/dev/sda3</code> æ”¹ä¸ºä½ çš„ <code>swap</code> åˆ†åŒºå¯¹åº”çš„æ ‡å¿—å³å¯ï¼ˆæ¨èä½¿ç”¨ <code>gparted</code> æŸ¥çœ‹ï¼‰ ç„¶åå†æ‰§è¡Œ <code>sudo update-grub</code></p></blockquote><h2 id="æƒ…å†µäºŒ" tabindex="-1"><a class="header-anchor" href="#æƒ…å†µäºŒ" aria-hidden="true">#</a> æƒ…å†µäºŒ</h2>',6),_={href:"https://wiki.debian.org/Hibernation/Hibernate_Without_Swap_Partition",target:"_blank",rel:"noopener noreferrer"},f=n(`<h3 id="_1-åˆ›å»ºä¸€ä¸ªswapæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-åˆ›å»ºä¸€ä¸ªswapæ–‡ä»¶" aria-hidden="true">#</a> 1. åˆ›å»ºä¸€ä¸ªswapæ–‡ä»¶</h3><div class="language-copy-to-clipboard line-numbers-mode" data-ext="copy-to-clipboard"><pre class="language-copy-to-clipboard"><code>fallocate -l 256m /swap
mkswap /swap
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€œ256â€æ˜¯æŒ‡ä»¥MBä¸ºå•ä½çš„å¤§å°ï¼ˆå…¶åçš„&#39;m&#39;ï¼‰ã€‚å°†å…¶è®¾ç½®ä¸ºRAMçš„è‡³å°‘ä¸€åŠå¤§å°(è¿™ä¸ªæ˜¯debian wikiç»™å®šçš„æ•°æ®ï¼Œæˆ‘å»ºè®®è®¾ç½®ä¸ºè‡³å°‘è®¾ç½®ä¸ºå†…å­˜ç›¸åŒå¤§å°)ã€‚â€œ/swapâ€æ˜¯äº¤æ¢æ–‡ä»¶çš„è·¯å¾„ã€‚å®ƒå¯ä»¥ä½äºä»»ä½•åˆ†åŒºï¼ˆä¾‹å¦‚rootæˆ–homeï¼‰ã€‚</p><h3 id="_2-è¿›è¡Œswapæ–‡ä»¶ç›¸å…³è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#_2-è¿›è¡Œswapæ–‡ä»¶ç›¸å…³è®¾ç½®" aria-hidden="true">#</a> 2. è¿›è¡Œswapæ–‡ä»¶ç›¸å…³è®¾ç½®</h3><ul><li><p>æŒ‚è½½swapæ–‡ä»¶ å°†æ­¤è¡Œæ·»åŠ åˆ°/etc/fstabæ–‡ä»¶ä¸­ï¼š <code>/swap swap swap defaults 0 0</code></p></li><li><p>å‡å°‘ä½¿ç”¨swapæ–‡ä»¶ ç»ˆç«¯æ‰§è¡Œ <code>sudo sysctl -w vm.swappiness = 1</code> å¹¶åœ¨/etc/sysctl.dä¸­åˆ›å»ºä¸€ä¸ªåä¸ºlocal.confçš„æ–‡ä»¶ï¼Œä¸ºäº†ä½¿vm.swappinessä¿æŒä¸å˜ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹:</p></li></ul><div class="language-copy-to-clipboard line-numbers-mode" data-ext="copy-to-clipboard"><pre class="language-copy-to-clipboard"><code>vm.swappiness = 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,6),g={href:"http://blog.sina.com.cn/s/blog_13cc013b50102wskd.html",target:"_blank",rel:"noopener noreferrer"},k=e("code",null,"swap",-1),x=e("code",null,"swap",-1),y=e("code",null,"swap",-1),q=n('<ul><li>æ¿€æ´»swapæ–‡ä»¶ï¼š ç»ˆç«¯æ‰§è¡Œ <code>sudo swapon /swap</code></li></ul><h3 id="_3-å®‰è£…å’Œé…ç½®ç›¸å…³è½¯ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-å®‰è£…å’Œé…ç½®ç›¸å…³è½¯ä»¶" aria-hidden="true">#</a> 3. å®‰è£…å’Œé…ç½®ç›¸å…³è½¯ä»¶</h3><p>ä½¿ç”¨uswsuspè¿™ä¸ªè½¯ä»¶ï¼Œè¿™æ˜¯linuxå†…æ ¸ä½¿ç”¨swapæ–‡ä»¶ä»£æ›¿swapåˆ†åŒºæ¥è¿›è¡ŒæŒ‚èµ·ï¼ˆä¼‘çœ ï¼‰çš„æ–¹æ³•ï¼Œå¹¶ä¸”è¿˜æ”¯æŒå‹ç¼©å’ŒåŠ å¯†ç­‰åŠŸèƒ½ã€‚</p><ul><li><p>å®‰è£…uswsuspï¼š ç»ˆç«¯æ‰§è¡Œ <code>aptitude install uswsusp</code></p></li><li><p>é…ç½®uswsuspï¼š ç»ˆç«¯æ‰§è¡Œ <code>sudo dpkg-reconfigure -pmedium uswsusp</code>ï¼Œç„¶åä¼šå‡ºç°å¦‚ä¸‹æç¤ºæ¡† <img src="'+r+'" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20180605160224.png"> ä»è¿™ä¸ªé—®é¢˜å¼€å§‹å…¨éƒ¨é€‰æ‹©ç¡®å®šï¼Œç›´åˆ°å‡ºç°ï¼š</p></li></ul><p><img src="'+t+'" alt="é€‰æ‹©swapæ–‡ä»¶"> æ­¤å¤„é€‰æ‹©ä½ è¦ä½¿ç”¨çš„swapæ–‡ä»¶ï¼Œæ³¨ï¼šæˆ‘è¿™é‡Œæ˜¯/var/swapfileè¿™ä¸ªæ–‡ä»¶</p><p><img src="'+p+`" alt="é€‰æ‹©æ˜¯å¦å¯¹ä¼‘çœ å†™å…¥swapçš„æ•°æ®åŠ å¯†"> æ ¹æ®éœ€è¦é€‰æ‹©å°±å¥½ï¼ˆéœ€è¦çŸ¥æ™“çš„æ˜¯ï¼Œå¼€å¯åŠ å¯†åŠŸèƒ½ä¹‹åä¼‘çœ çš„å¯åŠ¨æ‰€æ¶ˆè€—çš„æ—¶é—´ä¼šå¢åŠ ï¼‰ã€‚å¦‚æœé€‰æ‹©åŠ å¯†çš„è¯ï¼Œå®ƒä¼šæç¤ºä½ è®¾å®šä¸€ä¸ªå¯†ç </p><ul><li>å¯¹uswsuspè¿›è¡Œè¿›ä¸€æ­¥é…ç½®</li></ul><p>ä¸€èˆ¬é…ç½®æ–‡ä»¶/etc/uswsusp.confå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-copy-to-clipboard line-numbers-mode" data-ext="copy-to-clipboard"><pre class="language-copy-to-clipboard"><code>ï¼ƒ/etc/uswsusp.confï¼ˆ8ï¼‰ -- Configuration file for s2disk / s2both

resume device= /swap

compress = y

early writeout= y

image size= 238941634

RSA key file = /etc/uswsusp.key

shutdown method = platform

resume offset = 8288

# encrypt = y å¦‚æœä½ é€‰æ‹©äº†å¯¹æ•°æ®åŠ å¯†ï¼Œåˆ™ä¼šæœ‰è¿™ä¸€è¡Œ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>resume offset = 8288</code> æ˜¯äº¤æ¢æ–‡ä»¶å®é™…å­˜æ”¾çš„åœ°æ–¹ï¼ˆåº”è¯¥æ˜¯ç¡¬ç›˜çš„ç‰©ç†åœ°å€ï¼‰ã€‚ä½ å¯ä»¥ç»ˆç«¯æ‰§è¡Œ <code>swap-offset /swap</code> è·å¾—è¿™ä¸ªå€¼ã€‚ <code>resume device</code> å¿…é¡»æ˜¯åˆ†åŒºè€Œä¸æ˜¯äº¤æ¢æ–‡ä»¶ã€‚ä¸€èˆ¬è¿™è¡Œçš„å€¼ä¼šåœ¨ä¸Šä¸€æ­¥å®Œæˆåå˜æˆä½ çš„ <code>swap</code> æ–‡ä»¶çš„è·¯å¾„ï¼Œéœ€è¦æ”¹æˆä½ çš„ <code>swap</code> æ–‡ä»¶æ‰€åœ¨çš„åˆ†åŒºï¼Œå¦‚ <code>/dev/sda1</code></p><p>ç¼–è¾‘ <code>/etc/uswsusp.conf</code> æ–‡ä»¶åï¼š ç»ˆç«¯æ‰§è¡Œ <code>sudo update-initramfs -u</code></p><ol><li>é»˜è®¤å¯åŠ¨çš„é…ç½® ä¸ºäº†è®©ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œé»˜è®¤ä»swapæ–‡ä»¶åŠ è½½æ•°æ®ã€‚å°† <code>/etc/default/grub</code> æ–‡ä»¶ä¸­çš„ç›¸å…³è®¾ç½®è¿›è¡Œä¿®æ”¹ï¼š <code>GRUB_CMDLINE_LINUX_DEFAULT =&quot;resume = /dev/sda1 quiet&quot;</code> å…¶ä¸­ <code>/dev/sda1</code> æ˜¯äº¤æ¢æ–‡ä»¶æ‰€åœ¨çš„åˆ†åŒºã€‚ ç»ˆç«¯æ‰§è¡Œ <code>sudo update-grub</code></li></ol><h2 id="æµ‹è¯•ä¼‘çœ " tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•ä¼‘çœ " aria-hidden="true">#</a> æµ‹è¯•ä¼‘çœ </h2><p>ç»ˆç«¯æ‰§è¡Œï¼š<code>sudo s2disk</code></p><p><strong>æ³¨</strong>ï¼šé…ç½®æˆåŠŸä¹‹åï¼Œå¦‚æœå†æ¬¡ä¿®æ”¹äº† <code>uswsusp</code> çš„è®¾ç½®éœ€è¦æ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> update-initramfs <span class="token parameter variable">-u</span>
<span class="token function">sudo</span> <span class="token function">update-grub</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é™„å½•" tabindex="-1"><a class="header-anchor" href="#é™„å½•" aria-hidden="true">#</a> é™„å½•</h2><p>å¦‚æœä½ çš„ç£ç›˜åˆ†åŒºç»“æ„å˜äº†ï¼Œæ¯”å¦‚ <code>sda3</code> å˜æˆäº† <code>sda4</code>ï¼ŒæŒ‰ç…§ä¸Šé¢æ­¥éª¤å†æ¥ä¸€éå°±å¥½å•¦ï¼ˆå› ä¸ºéœ€è¦æ›´æ–° <code>grub</code> å’Œ <code>uswsusp.conf</code>ï¼‰ã€‚</p>`,18);function D(L,N){const a=o("ExternalLinkIcon");return c(),l("div",null,[h,e("p",null,[e("a",b,[s("deepinå®˜ç½‘"),d(a)]),s(" ä¼‘çœ è¿™ä¸ªåŠŸèƒ½è¿˜æ˜¯å¾ˆé…·å¾ˆå®ç”¨çš„ï¼Œå¯¹äº "),v,s(" ç³»ç»Ÿï¼Œä¼‘çœ ä¸€èˆ¬å°±æ˜¯æŠŠå†…å­˜ä¸­çš„æ•°æ®å†™å…¥ç¡¬ç›˜ï¼ˆ"),m,s("æ–‡ä»¶ï¼‰ï¼Œç„¶åå…³æœºã€‚åœ¨ä¸‹ä¸€æ¬¡å¼€æœºçš„æ—¶å€™å°†æ•°æ®é‡æ–°è½½å…¥å†…å­˜ï¼Œè®©ä½ å¿«é€Ÿå›åˆ°ä¸Šä¸€æ¬¡çš„å·¥ä½œçŠ¶æ€ï¼Œè¿™åœ¨ä½ å¼€å¯äº†å¤§é‡çš„ç¨‹åºä½†éœ€è¦æš‚åœå·¥ä½œçš„æ—¶å€™å°¤å…¶å¥½ç”¨ã€‚")]),w,e("p",null,[s("å¦‚æœä½ æ²¡åŠæ³•ä»ç¡¬ç›˜åˆ’åˆ†ä¸€ä¸ªswapåˆ†åŒºï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨swapæ–‡ä»¶æ¥è¿›è¡Œä¼‘çœ ã€‚ "),e("a",_,[s("æœ¬æ•™ç¨‹å‚è€ƒäº†Debiançš„wiki"),d(a)]),s(" å¤§ä½“æ€è·¯ï¼šåˆ›å»ºswapæ–‡ä»¶-->é…ç½®swapæ–‡ä»¶-->å®‰è£…uswsusp-->é…ç½®uswsusp")]),f,e("blockquote",null,[e("p",null,[e("a",g,[s("vm.swappinessæ‰©å±•çŸ¥è¯†"),d(a)]),s(" å‡å°‘å†…æ ¸å¯¹ "),k,s(" çš„ä½¿ç”¨è¿™ä¸€æ­¥ä¸»è¦æ˜¯é’ˆå¯¹ä½¿ç”¨æœºæ¢°ç¡¬ç›˜çš„åŒå­¦ï¼Œå› ä¸ºåœ¨æœºæ¢°ç¡¬ç›˜ä¸­å¤§é‡å¯¹ "),x,s(" è¿›è¡Œè¯»å†™ä¼šæ‹–æ…¢ç³»ç»Ÿçš„é€Ÿåº¦ï¼Œ Debian wiki é‡Œé¢å†™çš„æ˜¯åœæ­¢å†…æ ¸ä½¿ç”¨ "),y,s(" æ–‡ä»¶ï¼Œå¯èƒ½æ˜¯åŸä½œè€…ç¬”è¯¯ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»–çè¯´çš„ğŸ¤—")])]),q])}const B=i(u,[["render",D],["__file","Deepinä¼‘çœ .html.vue"]]);export{B as default};
