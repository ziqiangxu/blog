(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{177:function(t,e,s){t.exports=s.p+"assets/img/deepin-hibernate-msg-box.4abdc79b.png"},178:function(t,e,s){t.exports=s.p+"assets/img/deepin-hibernate-select-swap-file.e7fe24e3.png"},179:function(t,e,s){t.exports=s.p+"assets/img/deepin-hibernate-is-encrypt-data.ba5c385b.png"},250:function(t,e,s){"use strict";s.r(e);var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"deepin-如何休眠"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deepin-如何休眠","aria-hidden":"true"}},[this._v("#")]),this._v(" "),e("code",[this._v("Deepin")]),this._v(" 如何休眠")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"情况一"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#情况一","aria-hidden":"true"}},[this._v("#")]),this._v(" 情况一")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("如果你的电脑有 "),e("code",[this._v("swap")]),this._v(" 分区， "),e("code",[this._v("deepin")]),this._v(" 会探测到，关机的时候会有休眠选项了，这个功能终于加到关机菜单里了，给 "),e("code",[this._v("deepin")]),this._v(" 点赞。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("s",[this._v("一般来说，如果你有一个可以正常使用的swap分区，只需要在终端执行")]),this._v(" "),e("s",[e("code",[this._v("systemctl hibernate")])]),this._v(" "),e("s",[this._v("就可以休眠了。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("当然，也有例外")]),this._v(", 如果你休眠之后开机发现你的电脑并没有恢复现场，则需要指定一下启动的磁盘（从swap分区启动），操作方法如下：")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("blockquote",[s("p",[t._v("修改/etc/default/grub这个文件中的相关内容\n"),s("code",[t._v('GRUB_CMDLINE_LINUX_DEFAULT="resume=/dev/sda3 quiet"')]),t._v("\n其中 "),s("code",[t._v("/dev/sda3")]),t._v(" 改为你的 "),s("code",[t._v("swap")]),t._v(" 分区对应的标志即可（推荐使用 "),s("code",[t._v("gparted")]),t._v(" 查看）\n然后再执行 "),s("code",[t._v("sudo update-grub")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"情况二"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#情况二","aria-hidden":"true"}},[this._v("#")]),this._v(" 情况二")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1-创建一个swap文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建一个swap文件","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 创建一个swap文件")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-copy-to-clipboard extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("fallocate -l 256m /swap\nmkswap /swap\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-进行swap文件相关设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-进行swap文件相关设置","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 进行swap文件相关设置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("挂载swap文件\n将此行添加到/etc/fstab文件中：\n"),e("code",[this._v("/swap swap swap defaults 0 0")])])]),this._v(" "),e("li",[e("p",[this._v("减少使用swap文件\n终端执行 "),e("code",[this._v("sudo sysctl -w vm.swappiness = 1")]),this._v("\n并在/etc/sysctl.d中创建一个名为local.conf的文件，为了使vm.swappiness保持不变，文件内容如下:")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-copy-to-clipboard extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("vm.swappiness = 1\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("激活swap文件：\n终端执行 "),e("code",[this._v("sudo swapon /swap")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-安装和配置相关软件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装和配置相关软件","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 安装和配置相关软件")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("安装uswsusp：\n终端执行 "),e("code",[this._v("aptitude install uswsusp")])])]),this._v(" "),e("li",[e("p",[this._v("配置uswsusp：\n终端执行 "),e("code",[this._v("sudo dpkg-reconfigure -pmedium uswsusp")]),this._v("，然后会出现如下提示框\n"),e("img",{attrs:{src:s(177),alt:"深度截图_选择区域_20180605160224.png"}}),this._v("\n从这个问题开始全部选择确定，直到出现：")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(178),alt:"选择swap文件"}}),this._v("\n此处选择你要使用的swap文件，注：我这里是/var/swapfile这个文件")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(179),alt:"选择是否对休眠写入swap的数据加密"}}),this._v("\n根据需要选择就好（需要知晓的是，开启加密功能之后休眠的启动所消耗的时间会增加）。如果选择加密的话，它会提示你设定一个密码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("对uswsusp进行进一步配置")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-copy-to-clipboard extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("＃/etc/uswsusp.conf（8） -- Configuration file for s2disk / s2both\n\nresume device= /swap\n\ncompress = y\n\nearly writeout= y\n\nimage size= 238941634\n\nRSA key file = /etc/uswsusp.key\n\nshutdown method = platform\n\nresume offset = 8288\n\n# encrypt = y 如果你选择了对数据加密，则会有这一行\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("code",[t._v("resume offset = 8288")]),t._v(" 是交换文件实际存放的地方（应该是硬盘的物理地址）。你可以终端执行 "),s("code",[t._v("swap-offset /swap")]),t._v(" 获得这个值。\n"),s("code",[t._v("resume device")]),t._v(" 必须是分区而不是交换文件。一般这行的值会在上一步完成后变成你的 "),s("code",[t._v("swap")]),t._v(" 文件的路径，需要改成你的 "),s("code",[t._v("swap")]),t._v(" 文件所在的分区，如 "),s("code",[t._v("/dev/sda1")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("编辑 "),e("code",[this._v("/etc/uswsusp.conf")]),this._v(" 文件后：\n终端执行 "),e("code",[this._v("sudo update-initramfs -u")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[t._v("默认启动的配置\n为了让系统启动时，默认从swap文件加载数据。将 "),s("code",[t._v("/etc/default/grub")]),t._v(" 文件中的相关设置进行修改：\n"),s("code",[t._v('GRUB_CMDLINE_LINUX_DEFAULT ="resume = /dev/sda1 quiet"')]),t._v("\n其中 "),s("code",[t._v("/dev/sda1")]),t._v(" 是交换文件所在的分区。\n终端执行 "),s("code",[t._v("sudo update-grub")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"测试休眠"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试休眠","aria-hidden":"true"}},[this._v("#")]),this._v(" 测试休眠")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("终端执行："),e("code",[this._v("sudo s2disk")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("注")]),this._v("：配置成功之后，如果再次修改了 "),e("code",[this._v("uswsusp")]),this._v(" 的设置需要执行")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("sudo")]),this._v(" update-initramfs -u\n"),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("sudo")]),this._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("update-grub")]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"附录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#附录","aria-hidden":"true"}},[this._v("#")]),this._v(" 附录")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("如果你的磁盘分区结构变了，比如 "),s("code",[t._v("sda3")]),t._v(" 变成了 "),s("code",[t._v("sda4")]),t._v("，按照上面步骤再来一遍就好啦（因为需要更新 "),s("code",[t._v("grub")]),t._v(" 和 "),s("code",[t._v("uswsusp.conf")]),t._v("）。")])}],n=s(0),i=Object(n.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.deepin.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("deepin官网"),s("OutboundLink")],1),t._v("\n休眠这个功能还是很酷很实用的，对于 "),s("code",[t._v("Linux")]),t._v(" 系统，休眠一般就是把内存中的数据写入硬盘（"),s("code",[t._v("swap")]),t._v("文件），然后关机。在下一次开机的时候将数据重新载入内存，让你快速回到上一次的工作状态，这在你开启了大量的程序但需要暂停工作的时候尤其好用。")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("如果你没办法从硬盘划分一个swap分区，你可以通过使用swap文件来进行休眠。\n"),s("a",{attrs:{href:"https://wiki.debian.org/Hibernation/Hibernate_Without_Swap_Partition",target:"_blank",rel:"noopener noreferrer"}},[t._v("本教程参考了Debian的wiki"),s("OutboundLink")],1),t._v("\n大体思路：创建swap文件--\x3e配置swap文件--\x3e安装uswsusp--\x3e配置uswsusp")]),t._v(" "),t._m(7),t._v(" "),t._m(8),s("p",[t._v("“256”是指以MB为单位的大小（其后的'm'）。将其设置为RAM的至少一半大小(这个是debian wiki给定的数据，我建议设置为至少设置为内存相同大小)。“/swap”是交换文件的路径。它可以位于任何分区（例如root或home）。")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),s("blockquote",[s("p",[s("a",{attrs:{href:"http://blog.sina.com.cn/s/blog_13cc013b50102wskd.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("vm.swappiness扩展知识"),s("OutboundLink")],1),t._v("\n减少内核对 "),s("code",[t._v("swap")]),t._v(" 的使用这一步主要是针对使用机械硬盘的同学，因为在机械硬盘中大量对 "),s("code",[t._v("swap")]),t._v(" 进行读写会拖慢系统的速度， Debian wiki 里面写的是停止内核使用 "),s("code",[t._v("swap")]),t._v(" 文件，可能是原作者笔误，也可能是他瞎说的🤗")])]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),s("p",[t._v("使用uswsusp这个软件，这是linux内核使用swap文件代替swap分区来进行挂起（休眠）的方法，并且还支持压缩和加密等功能。")]),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),s("p",[t._v("一般配置文件/etc/uswsusp.conf内容如下所示：")]),t._v(" "),t._m(18),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._m(26),t._v(" "),t._m(27),t._v(" "),s("comment-comment")],1)},a,!1,null,null,null);e.default=i.exports}}]);