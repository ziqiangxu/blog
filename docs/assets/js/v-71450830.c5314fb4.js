"use strict";(self.webpackChunkziqiangxu_github_io=self.webpackChunkziqiangxu_github_io||[]).push([[8057],{4490:(n,e,a)=>{a.r(e),a.d(e,{data:()=>s});const s={key:"v-71450830",path:"/Python/Django%E5%BC%80%E5%8F%91%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%87%BA%E7%8E%B0CSRF-cookies-not-set%E9%94%99%E8%AF%AF.html",title:"Django 开发微信公众号出现 CSRF cookie not set 错误",lang:"en-US",frontmatter:{},excerpt:"",headers:[],filePathRelative:"Python/Django开发微信公众号出现CSRF-cookies-not-set错误.md",git:{updatedTime:1595072993e3,contributors:[{name:"Daryl.Xu",email:"ziqiang_xu@yeah.net",commits:2},{name:"daryl",email:"ziqiang_xu@qq.com",commits:2},{name:"daryl",email:"ziqiang_xu@yeah.net",commits:1}]}}},136:(n,e,a)=>{a.r(e),a.d(e,{default:()=>c});var s=a(6252);const o=a.p+"assets/img/pic1.3244d9c4.png",l=(0,s.Wm)("h1",{id:"django-开发微信公众号出现-csrf-cookie-not-set-错误",tabindex:"-1"},[(0,s.Wm)("a",{class:"header-anchor",href:"#django-开发微信公众号出现-csrf-cookie-not-set-错误","aria-hidden":"true"},"#"),(0,s.Uk)(),(0,s.Wm)("code",null,"Django"),(0,s.Uk)(" 开发微信公众号出现 "),(0,s.Wm)("code",null,"CSRF cookie not set"),(0,s.Uk)(" 错误")],-1),t=(0,s.Wm)("p",null,[(0,s.Uk)("当用户向公众号发送消息的时候，使用 "),(0,s.Wm)("code",null,"python3 manage.py runserver 0.0.0.0:80"),(0,s.Uk)(" 出现错误 "),(0,s.Wm)("code",null,"Forbidden (CSRF cookie not set.): /wx"),(0,s.Uk)(" 这是 "),(0,s.Wm)("code",null,"Django"),(0,s.Uk)(" 默认开启的一种防止跨域攻击的选项，要求用 "),(0,s.Wm)("code",null,"POST"),(0,s.Uk)(" 访问网站的时候提供 "),(0,s.Wm)("code",null,"CSRF cookie"),(0,s.Uk)("（这个一般会在用户使用 "),(0,s.Wm)("code",null,"GET"),(0,s.Uk)(" 请求 "),(0,s.Wm)("code",null,"Django"),(0,s.Uk)(" 网站时颁发） 截图 "),(0,s.Wm)("img",{src:o,alt:"DeepinScreenshot_select-area_20171017210442.png"}),(0,s.Uk)(" 此时，只要把项目中 "),(0,s.Wm)("code",null,"setting.py"),(0,s.Uk)(" 文件中")],-1),m=(0,s.Wm)("div",{class:"language-python ext-py line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-python"},[(0,s.Wm)("code",null,[(0,s.Uk)("MIDDLEWARE "),(0,s.Wm)("span",{class:"token operator"},"="),(0,s.Uk)(),(0,s.Wm)("span",{class:"token punctuation"},"["),(0,s.Uk)("\n    "),(0,s.Wm)("span",{class:"token string"},"'django.middleware.security.SecurityMiddleware'"),(0,s.Wm)("span",{class:"token punctuation"},","),(0,s.Uk)("\n    "),(0,s.Wm)("span",{class:"token string"},"'django.contrib.sessions.middleware.SessionMiddleware'"),(0,s.Wm)("span",{class:"token punctuation"},","),(0,s.Uk)("\n    "),(0,s.Wm)("span",{class:"token string"},"'django.middleware.common.CommonMiddleware'"),(0,s.Wm)("span",{class:"token punctuation"},","),(0,s.Uk)("\n    "),(0,s.Wm)("span",{class:"token comment"},"# 'django.middleware.csrf.CsrfViewMiddleware',"),(0,s.Uk)("\n    "),(0,s.Wm)("span",{class:"token string"},"'django.contrib.auth.middleware.AuthenticationMiddleware'"),(0,s.Wm)("span",{class:"token punctuation"},","),(0,s.Uk)("\n    "),(0,s.Wm)("span",{class:"token string"},"'django.contrib.messages.middleware.MessageMiddleware'"),(0,s.Wm)("span",{class:"token punctuation"},","),(0,s.Uk)("\n    "),(0,s.Wm)("span",{class:"token string"},"'django.middleware.clickjacking.XFrameOptionsMiddleware'"),(0,s.Wm)("span",{class:"token punctuation"},","),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token punctuation"},"]"),(0,s.Uk)("\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"2"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"3"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"4"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"5"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"6"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"7"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"8"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"9"),(0,s.Wm)("br")])],-1),i=(0,s.Wm)("p",null,[(0,s.Uk)("第四行注释掉即可，关闭整个项目的 "),(0,s.Wm)("code",null,"CSRF"),(0,s.Uk)("，这种方法可以快速解决这个问题 但是只关闭对应的 "),(0,s.Wm)("code",null,"url"),(0,s.Uk)(" 的处理函数更加优雅（请搜索 "),(0,s.Wm)("em",null,[(0,s.Uk)("局部关闭 "),(0,s.Wm)("code",null,"crsf")]),(0,s.Uk)("）")],-1),c={render:function(n,e){return(0,s.wg)(),(0,s.j4)(s.HY,null,[l,t,m,i],64)}}}}]);